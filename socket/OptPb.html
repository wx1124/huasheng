<html>
<head>
<script src="./js/socket.io.js"></script>
<script src="./jspb/long.min.js"></script>     
<script src="./jspb/ByteBuffer.min.js"></script>     
<script src="./jspb/ProtoBuf.min.js"></script>
<script>
 if (typeof dcodeIO === 'undefined' || !dcodeIO.ProtoBuf) {    
    alert('出错');    
    throw(new Error("ProtoBuf.js is not present. Please see www/index.html for manual setup instructions.")); 
}    
// 创建ProtoBuf    
var ProtoBuf = dcodeIO.ProtoBuf;  
    
var UserModel = ProtoBuf.loadProtoFile("./pb.proto").build('protobuf.User');    
user = new UserModel();    
user.uid=111;    
user.uname='张三';    
user.pwd='aaa';    
alert(user.pwd);    
 //------编码:发送代码-------
    //var buffer = user.toArrayBuffer(); //编码
    var buffer = user.encode().toBuffer();//编码 
//-------解码------------------
var userbuf = UserModel.decode(buffer);
alert(userbuf.uname);
</script>
</head>
<body>
</body>
</html>